CMAKE_MINIMUM_REQUIRED(VERSION 3.23)

PROJECT(nets LANGUAGES C CXX)

# 开启ctest
ENABLE_TESTING()

MESSAGE(STATUS "======CMAKE_BUILD_TYPE: ${CMAKE_BUILD_TYPE}======")

# Definition
# 日志缓存大小：默认4k。
#ADD_DEFINITIONS(-DLOG_BUFFER_SIZE=4096)
# 日志等级：默认DEBUG。可选：TRACE,DEBUG,INFO,WARN,ERROR,FATAL
ADD_DEFINITIONS(-DLOG_LEVEL=TRACE)
# 日志输出目标：默认标准输出。可选：STDOUT,FILE
ADD_DEFINITIONS(-DLOG_APPENDER=STDOUT)
#日志文件路径
ADD_DEFINITIONS(-DLOG_PATH="~/nets/log")
#日志文件回滚大小：单位:MB
ADD_DEFINITIONS(-DLOG_ROLLING_SIZE=24)

# C CXX Compiler
SET(CMAKE_C_COMPILER "/usr/bin/gcc")
SET(CMAKE_CXX_COMPILER "/usr/bin/g++")

# CXX Compiler Flags
SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11 -g \
-Wall \
-Wextra \
-Werror \
-Wno-unused-parameter \
")
IF(${CMAKE_BUILD_TYPE} STREQUAL "Release")
    SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -O2 -DNDEBUG")
ELSE()
    OPTION(BUILD_NETS_TESTS "Build nets tests" ON)
    OPTION(BUILD_NETS_EXAMPLES "Build nets examples" ON)
    SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -O0")
    SET(GOOGLE_TEST_INC_DIR ${PROJECT_SOURCE_DIR}/third_party/googletest/include)
    SET(GOOGLE_TEST_LIB_DIR ${PROJECT_SOURCE_DIR}/third_party/googletest/lib)
ENDIF()

MESSAGE(STATUS "======CMAKE_CXX_FLAGS: ${CMAKE_CXX_FLAGS}======")

#set(EXECUTABLE_OUTPUT_PATH ${PROJECT_BINARY_DIR}/bin)
#set(LIBRARY_OUTPUT_PATH ${PROJECT_BINARY_DIR}/lib)

INCLUDE_DIRECTORIES(${PROJECT_SOURCE_DIR})
ADD_SUBDIRECTORY(base)
